{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block head %}
{{super()}}
{% endblock %}
{% block content %}

<!-- Grid setup and styling used from http://gomokuonline.com/ -->

<form action="{{ url_for('home') }}" method="post">
  <input id="moveForm" style="display:none" type="text" name="board">
  <input id="sub" type="submit" value="Submit" style="display:none">
</form>

<table id="layout">
  <tbody>
    <tr>
      <td>
        <table id="gomoku">
          <tbody>
            <tr>
              <td id="0-0" onclick="play(0, 0);">&nbsp;</td>
              <td id="1-0" onclick="play(1, 0);">&nbsp;</td>
              <td id="2-0" onclick="play(2, 0);">&nbsp;</td>
              <td id="3-0" onclick="play(3, 0);">&nbsp;</td>
              <td id="4-0" onclick="play(4, 0);">&nbsp;</td>
              <td id="5-0" onclick="play(5, 0);">&nbsp;</td>
              <td id="6-0" onclick="play(6, 0);">&nbsp;</td>
              <td id="7-0" onclick="play(7, 0);">&nbsp;</td>
              <td id="8-0" onclick="play(8, 0);">&nbsp;</td>
              <td id="9-0" onclick="play(9, 0);">&nbsp;</td>
              <td id="10-0" onclick="play(10, 0);">&nbsp;</td>
              <td id="11-0" onclick="play(11, 0);">&nbsp;</td>
              <td id="12-0" onclick="play(12, 0);">&nbsp;</td>
              <td id="13-0" onclick="play(13, 0);">&nbsp;</td>
              <td id="14-0" onclick="play(14, 0);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-1" onclick="play(0, 1);">&nbsp;</td>
              <td id="1-1" onclick="play(1, 1);">&nbsp;</td>
              <td id="2-1" onclick="play(2, 1);">&nbsp;</td>
              <td id="3-1" onclick="play(3, 1);">&nbsp;</td>
              <td id="4-1" onclick="play(4, 1);">&nbsp;</td>
              <td id="5-1" onclick="play(5, 1);">&nbsp;</td>
              <td id="6-1" onclick="play(6, 1);">&nbsp;</td>
              <td id="7-1" onclick="play(7, 1);">&nbsp;</td>
              <td id="8-1" onclick="play(8, 1);">&nbsp;</td>
              <td id="9-1" onclick="play(9, 1);">&nbsp;</td>
              <td id="10-1" onclick="play(10, 1);">&nbsp;</td>
              <td id="11-1" onclick="play(11, 1);">&nbsp;</td>
              <td id="12-1" onclick="play(12, 1);">&nbsp;</td>
              <td id="13-1" onclick="play(13, 1);">&nbsp;</td>
              <td id="14-1" onclick="play(14, 1);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-2" onclick="play(0, 2);">&nbsp;</td>
              <td id="1-2" onclick="play(1, 2);">&nbsp;</td>
              <td id="2-2" onclick="play(2, 2);">&nbsp;</td>
              <td id="3-2" onclick="play(3, 2);">&nbsp;</td>
              <td id="4-2" onclick="play(4, 2);">&nbsp;</td>
              <td id="5-2" onclick="play(5, 2);">&nbsp;</td>
              <td id="6-2" onclick="play(6, 2);">&nbsp;</td>
              <td id="7-2" onclick="play(7, 2);">&nbsp;</td>
              <td id="8-2" onclick="play(8, 2);">&nbsp;</td>
              <td id="9-2" onclick="play(9, 2);">&nbsp;</td>
              <td id="10-2" onclick="play(10, 2);">&nbsp;</td>
              <td id="11-2" onclick="play(11, 2);">&nbsp;</td>
              <td id="12-2" onclick="play(12, 2);">&nbsp;</td>
              <td id="13-2" onclick="play(13, 2);">&nbsp;</td>
              <td id="14-2" onclick="play(14, 2);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-3" onclick="play(0, 3);">&nbsp;</td>
              <td id="1-3" onclick="play(1, 3);">&nbsp;</td>
              <td id="2-3" onclick="play(2, 3);">&nbsp;</td>
              <td id="3-3" onclick="play(3, 3);">&nbsp;</td>
              <td id="4-3" onclick="play(4, 3);">&nbsp;</td>
              <td id="5-3" onclick="play(5, 3);">&nbsp;</td>
              <td id="6-3" onclick="play(6, 3);">&nbsp;</td>
              <td id="7-3" onclick="play(7, 3);">&nbsp;</td>
              <td id="8-3" onclick="play(8, 3);">&nbsp;</td>
              <td id="9-3" onclick="play(9, 3);">&nbsp;</td>
              <td id="10-3" onclick="play(10, 3);">&nbsp;</td>
              <td id="11-3" onclick="play(11, 3);">&nbsp;</td>
              <td id="12-3" onclick="play(12, 3);">&nbsp;</td>
              <td id="13-3" onclick="play(13, 3);">&nbsp;</td>
              <td id="14-3" onclick="play(14, 3);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-4" onclick="play(0, 4);">&nbsp;</td>
              <td id="1-4" onclick="play(1, 4);">&nbsp;</td>
              <td id="2-4" onclick="play(2, 4);">&nbsp;</td>
              <td id="3-4" onclick="play(3, 4);">&nbsp;</td>
              <td id="4-4" onclick="play(4, 4);">&nbsp;</td>
              <td id="5-4" onclick="play(5, 4);">&nbsp;</td>
              <td id="6-4" onclick="play(6, 4);">&nbsp;</td>
              <td id="7-4" onclick="play(7, 4);">&nbsp;</td>
              <td id="8-4" onclick="play(8, 4);">&nbsp;</td>
              <td id="9-4" onclick="play(9, 4);">&nbsp;</td>
              <td id="10-4" onclick="play(10, 4);">&nbsp;</td>
              <td id="11-4" onclick="play(11, 4);">&nbsp;</td>
              <td id="12-4" onclick="play(12, 4);">&nbsp;</td>
              <td id="13-4" onclick="play(13, 4);">&nbsp;</td>
              <td id="14-4" onclick="play(14, 4);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-5" onclick="play(0, 5);">&nbsp;</td>
              <td id="1-5" onclick="play(1, 5);">&nbsp;</td>
              <td id="2-5" onclick="play(2, 5);">&nbsp;</td>
              <td id="3-5" onclick="play(3, 5);">&nbsp;</td>
              <td id="4-5" onclick="play(4, 5);">&nbsp;</td>
              <td id="5-5" onclick="play(5, 5);">&nbsp;</td>
              <td id="6-5" onclick="play(6, 5);">&nbsp;</td>
              <td id="7-5" onclick="play(7, 5);">&nbsp;</td>
              <td id="8-5" onclick="play(8, 5);">&nbsp;</td>
              <td id="9-5" onclick="play(9, 5);">&nbsp;</td>
              <td id="10-5" onclick="play(10, 5);">&nbsp;</td>
              <td id="11-5" onclick="play(11, 5);">&nbsp;</td>
              <td id="12-5" onclick="play(12, 5);">&nbsp;</td>
              <td id="13-5" onclick="play(13, 5);">&nbsp;</td>
              <td id="14-5" onclick="play(14, 5);">&nbsp;</td> 
            </tr>
            <tr>
              <td id="0-6" onclick="play(0, 6);">&nbsp;</td>
              <td id="1-6" onclick="play(1, 6);">&nbsp;</td>
              <td id="2-6" onclick="play(2, 6);">&nbsp;</td>
              <td id="3-6" onclick="play(3, 6);">&nbsp;</td>
              <td id="4-6" onclick="play(4, 6);">&nbsp;</td>
              <td id="5-6" onclick="play(5, 6);">&nbsp;</td>
              <td id="6-6" onclick="play(6, 6);">&nbsp;</td>
              <td id="7-6" onclick="play(7, 6);">&nbsp;</td>
              <td id="8-6" onclick="play(8, 6);">&nbsp;</td>
              <td id="9-6" onclick="play(9, 6);">&nbsp;</td>
              <td id="10-6" onclick="play(10, 6);">&nbsp;</td>
              <td id="11-6" onclick="play(11, 6);">&nbsp;</td>
              <td id="12-6" onclick="play(12, 6);">&nbsp;</td>
              <td id="13-6" onclick="play(13, 6);">&nbsp;</td>
              <td id="14-6" onclick="play(14, 6);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-7" onclick="play(0, 7);">&nbsp;</td>
              <td id="1-7" onclick="play(1, 7);">&nbsp;</td>
              <td id="2-7" onclick="play(2, 7);">&nbsp;</td>
              <td id="3-7" onclick="play(3, 7);">&nbsp;</td>
              <td id="4-7" onclick="play(4, 7);">&nbsp;</td>
              <td id="5-7" onclick="play(5, 7);">&nbsp;</td>
              <td id="6-7" onclick="play(6, 7);">&nbsp;</td>
              <td id="7-7" onclick="play(7, 7);">&nbsp;</td>
              <td id="8-7" onclick="play(8, 7);">&nbsp;</td>
              <td id="9-7" onclick="play(9, 7);">&nbsp;</td>
              <td id="10-7" onclick="play(10, 7);">&nbsp;</td>
              <td id="11-7" onclick="play(11, 7);">&nbsp;</td>
              <td id="12-7" onclick="play(12, 7);">&nbsp;</td>
              <td id="13-7" onclick="play(13, 7);">&nbsp;</td>
              <td id="14-7" onclick="play(14, 7);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-8" onclick="play(0, 8);">&nbsp;</td>
              <td id="1-8" onclick="play(1, 8);">&nbsp;</td>
              <td id="2-8" onclick="play(2, 8);">&nbsp;</td>
              <td id="3-8" onclick="play(3, 8);">&nbsp;</td>
              <td id="4-8" onclick="play(4, 8);">&nbsp;</td>
              <td id="5-8" onclick="play(5, 8);">&nbsp;</td>
              <td id="6-8" onclick="play(6, 8);">&nbsp;</td>
              <td id="7-8" onclick="play(7, 8);">&nbsp;</td>
              <td id="8-8" onclick="play(8, 8);">&nbsp;</td>
              <td id="9-8" onclick="play(9, 8);">&nbsp;</td>
              <td id="10-8" onclick="play(10, 8);">&nbsp;</td>
              <td id="11-8" onclick="play(11, 8);">&nbsp;</td>
              <td id="12-8" onclick="play(12, 8);">&nbsp;</td>
              <td id="13-8" onclick="play(13, 8);">&nbsp;</td>
              <td id="14-8" onclick="play(14, 8);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-9" onclick="play(0, 9);">&nbsp;</td>
              <td id="1-9" onclick="play(1, 9);">&nbsp;</td>
              <td id="2-9" onclick="play(2, 9);">&nbsp;</td>
              <td id="3-9" onclick="play(3, 9);">&nbsp;</td>
              <td id="4-9" onclick="play(4, 9);">&nbsp;</td>
              <td id="5-9" onclick="play(5, 9);">&nbsp;</td>
              <td id="6-9" onclick="play(6, 9);">&nbsp;</td>
              <td id="7-9" onclick="play(7, 9);">&nbsp;</td>
              <td id="8-9" onclick="play(8, 9);">&nbsp;</td>
              <td id="9-9" onclick="play(9, 9);">&nbsp;</td>
              <td id="10-9" onclick="play(10, 9);">&nbsp;</td>
              <td id="11-9" onclick="play(11, 9);">&nbsp;</td>
              <td id="12-9" onclick="play(12, 9);">&nbsp;</td>
              <td id="13-9" onclick="play(13, 9);">&nbsp;</td>
              <td id="14-9" onclick="play(14, 9);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-10" onclick="play(0, 10);">&nbsp;</td>
              <td id="1-10" onclick="play(1, 10);">&nbsp;</td>
              <td id="2-10" onclick="play(2, 10);">&nbsp;</td>
              <td id="3-10" onclick="play(3, 10);">&nbsp;</td>
              <td id="4-10" onclick="play(4, 10);">&nbsp;</td>
              <td id="5-10" onclick="play(5, 10);">&nbsp;</td>
              <td id="6-10" onclick="play(6, 10);">&nbsp;</td>
              <td id="7-10" onclick="play(7, 10);">&nbsp;</td>
              <td id="8-10" onclick="play(8, 10);">&nbsp;</td>
              <td id="9-10" onclick="play(9, 10);">&nbsp;</td>
              <td id="10-10" onclick="play(10, 10);">&nbsp;</td>
              <td id="11-10" onclick="play(11, 10);">&nbsp;</td>
              <td id="12-10" onclick="play(12, 10);">&nbsp;</td>
              <td id="13-10" onclick="play(13, 10);">&nbsp;</td>
              <td id="14-10" onclick="play(14, 10);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-11" onclick="play(0, 11);">&nbsp;</td>
              <td id="1-11" onclick="play(1, 11);">&nbsp;</td>
              <td id="2-11" onclick="play(2, 11);">&nbsp;</td>
              <td id="3-11" onclick="play(3, 11);">&nbsp;</td>
              <td id="4-11" onclick="play(4, 11);">&nbsp;</td>
              <td id="5-11" onclick="play(5, 11);">&nbsp;</td>
              <td id="6-11" onclick="play(6, 11);">&nbsp;</td>
              <td id="7-11" onclick="play(7, 11);">&nbsp;</td>
              <td id="8-11" onclick="play(8, 11);">&nbsp;</td>
              <td id="9-11" onclick="play(9, 11);">&nbsp;</td>
              <td id="10-11" onclick="play(10, 11);">&nbsp;</td>
              <td id="11-11" onclick="play(11, 11);">&nbsp;</td>
              <td id="12-11" onclick="play(12, 11);">&nbsp;</td>
              <td id="13-11" onclick="play(13, 11);">&nbsp;</td>
              <td id="14-11" onclick="play(14, 11);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-12" onclick="play(0, 12);">&nbsp;</td>
              <td id="1-12" onclick="play(1, 12);">&nbsp;</td>
              <td id="2-12" onclick="play(2, 12);">&nbsp;</td>
              <td id="3-12" onclick="play(3, 12);">&nbsp;</td>
              <td id="4-12" onclick="play(4, 12);">&nbsp;</td>
              <td id="5-12" onclick="play(5, 12);">&nbsp;</td>
              <td id="6-12" onclick="play(6, 12);">&nbsp;</td>
              <td id="7-12" onclick="play(7, 12);">&nbsp;</td>
              <td id="8-12" onclick="play(8, 12);">&nbsp;</td>
              <td id="9-12" onclick="play(9, 12);">&nbsp;</td>
              <td id="10-12" onclick="play(10, 12);">&nbsp;</td>
              <td id="11-12" onclick="play(11, 12);">&nbsp;</td>
              <td id="12-12" onclick="play(12, 12);">&nbsp;</td>
              <td id="13-12" onclick="play(13, 12);">&nbsp;</td>
              <td id="14-12" onclick="play(14, 12);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-13" onclick="play(0, 13);">&nbsp;</td>
              <td id="1-13" onclick="play(1, 13);">&nbsp;</td>
              <td id="2-13" onclick="play(2, 13);">&nbsp;</td>
              <td id="3-13" onclick="play(3, 13);">&nbsp;</td>
              <td id="4-13" onclick="play(4, 13);">&nbsp;</td>
              <td id="5-13" onclick="play(5, 13);">&nbsp;</td>
              <td id="6-13" onclick="play(6, 13);">&nbsp;</td>
              <td id="7-13" onclick="play(7, 13);">&nbsp;</td>
              <td id="8-13" onclick="play(8, 13);">&nbsp;</td>
              <td id="9-13" onclick="play(9, 13);">&nbsp;</td>
              <td id="10-13" onclick="play(10, 13);">&nbsp;</td>
              <td id="11-13" onclick="play(11, 13);">&nbsp;</td>
              <td id="12-13" onclick="play(12, 13);">&nbsp;</td>
              <td id="13-13" onclick="play(13, 13);">&nbsp;</td>
              <td id="14-13" onclick="play(14, 13);">&nbsp;</td>
            </tr>
            <tr>
              <td id="0-14" onclick="play(0, 14);">&nbsp;</td>
              <td id="1-14" onclick="play(1, 14);">&nbsp;</td>
              <td id="2-14" onclick="play(2, 14);">&nbsp;</td>
              <td id="3-14" onclick="play(3, 14);">&nbsp;</td>
              <td id="4-14" onclick="play(4, 14);">&nbsp;</td>
              <td id="5-14" onclick="play(5, 14);">&nbsp;</td>
              <td id="6-14" onclick="play(6, 14);">&nbsp;</td>
              <td id="7-14" onclick="play(7, 14);">&nbsp;</td>
              <td id="8-14" onclick="play(8, 14);">&nbsp;</td>
              <td id="9-14" onclick="play(9, 14);">&nbsp;</td>
              <td id="10-14" onclick="play(10, 14);">&nbsp;</td>
              <td id="11-14" onclick="play(11, 14);">&nbsp;</td>
              <td id="12-14" onclick="play(12, 14);">&nbsp;</td>
              <td id="13-14" onclick="play(13, 14);">&nbsp;</td>
              <td id="14-14" onclick="play(14, 14);">&nbsp;</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>

<h1 id="lost" style="display:none"> You Lost! </h1>
<h1 id="win" style="display:none"> You Win! </h1>

<form action="{{ url_for('home') }}" method="get">
  <div style="text-align:center">
    <input id="restart" type="submit" value="Restart" style="display:none">
  </div>
</form>

<!-- JavaScript for this page needs to be in this location due to the need to inject the Flask board variable  -->
<script>
  board = "{{board}}"

  var colorDict = {
    "X":"#ff2f00e0",
    "O":"#352f92"
  };

  function play(x, y) {
    board += "(" + x + "," + y + ")X;"
    document.getElementById("moveForm").value = board;
    x = document.getElementById("sub");
    x.click();
  }

  function color(board) {
    var moves = board.split(";");
    var numMoves = moves.length;
    for(var i = 0; i < numMoves - 1; i++) {
        var symbol = moves[i].split(")")[1];
        var aux = moves[i].split(")")[0].split("(")[1].split(",");
        var x = aux[0];
        var y = aux[1];
        var cellID = "";
        cellID += x + "-" + y;
        var color = colorDict[symbol];
        var cell = document.getElementById(cellID);
        cell.style.backgroundColor = color;
      }
  }
  window.onload = function() {
    color(board);
    var outcome = "{{outcome}}";
    if (outcome == "Win") {
        document.getElementById("win").style.display = "block";
        document.getElementById("restart").style.display = "";
    }
    if (outcome == "Loss") {
        document.getElementById("lost").style.display = "block";
        document.getElementById("restart").style.display = "";
    }
  }
</script>

{% endblock %}